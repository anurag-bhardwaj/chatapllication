(this.webpackJsonpchatanu=this.webpackJsonpchatanu||[]).push([[0],{128:function(e,t,a){},204:function(e,t,a){e.exports=a(398)},209:function(e,t,a){},210:function(e,t,a){},398:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(73),c=a.n(s),i=(a(209),a(210),a(7));var o=Object(i.b)((function(e){return console.log(e),{auth:e.firebase.auth}}),(function(e){return{signOut:function(){return e((function(e,t,a){(0,a.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})})).catch((function(t){e({type:"SIGNOUT_ERROR"})}))}))}}}))((function(e){var t=e.auth.uid?r.a.createElement("li",{style:{cursor:"pointer"},className:"nav-item active"},r.a.createElement("a",{className:"nav-link",onClick:e.signOut,style:{color:"white"}},"SignOut")):null;return r.a.createElement("div",{style:{height:"10vh"}},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-dark"},r.a.createElement("div",{className:"container",style:{width:"90%"}},r.a.createElement("a",{className:"navbar-brand",href:"/",style:{color:"white"}},"ChatApp"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",style:{borderColor:"lightgreen"}},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},t)))))})),l=a(33),u=a(74),m=a(75),h=a(77),d=a(76),g=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(l.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container",style:{width:"90%"}},r.a.createElement("form",{style:{textAlign:"start"},onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",style:{width:"40%",marginLeft:"30%"}},"Submit")))}}]),a}(n.Component),p=Object(i.b)(null,(function(e){return{signIn:function(t){return e((a=t,function(e,t,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(a.email,a.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var a}}}))(g),b=a(203);a(128);var f=Object(i.b)((function(e){return{auth:e.firebase.auth}}))((function(e){console.log(e);var t=e.chat.userMessage,a=e.auth.uid===e.chat.uid?"sent":"receive",n="";return r.a.createElement("div",null,function(){for(var e=0,a=0;a<t.length;a++)" "===t[a]?e=0:e++,e>=18&&(n+=" ",e=0),n+=t[a]}(),r.a.createElement("div",{className:"message"},r.a.createElement("div",{className:"".concat(a)},r.a.createElement("p",null,n))))})),v=a(14),E=function(e){return function(t,a,n){var r=n.getFirebase;n.getFirestore;r().firestore().collection("chatmessage").add(Object(v.a)(Object(v.a)({},e),{},{timeS:new Date})).then((function(){t({type:"Send_Message",message:e})})).catch((function(e){console.log(e)}))}},y=a(23),O=a(11),S=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={userMessage:"",uid:e.props.auth.uid},e.myRef=r.a.createRef(),e.handleChange=function(t){e.setState(Object(l.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.setState({userMessage:e.state.userMessage,uid:e.props.auth.uid}),e.myRef.current.scrollIntoView({block:"start",behavior:"smooth"}),e.state.userMessage&&e.props.SendMessage(e.state),e.setState({userMessage:""})},e}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(){this.myRef.current.scrollIntoView({block:"start",behavior:"smooth"})}},{key:"render",value:function(){return this.props.messages?r.a.createElement("div",{style:{height:"83vh",width:"100%",textAlign:"start"}},r.a.createElement("div",{className:"show-message"},Object(b.a)(this.props.messages).reverse().map((function(e){return r.a.createElement(f,{key:e.id,chat:e})})),r.a.createElement("span",{ref:this.myRef})),r.a.createElement("div",{className:"send-message"},r.a.createElement("form",{className:"write-message",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"write-here",type:"text",id:"userMessage",value:this.state.userMessage,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",className:"btn",value:"send"})))):r.a.createElement("div",{style:{height:"83vh",width:"100%",textAlign:"start"}},r.a.createElement("div",{className:"show-message"},r.a.createElement("span",{ref:this.myRef})),r.a.createElement("div",{className:"send-message"},r.a.createElement("form",{className:"write-message"},r.a.createElement("input",{className:"write-here",type:"text",id:"userMessage",value:this.state.userMessage,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",className:"btn",value:"send"}))))}}]),a}(n.Component),w=Object(O.d)(Object(i.b)((function(e){return{messages:e.firestore.ordered.chatmessage,auth:e.firebase.auth}}),(function(e){return{SendMessage:function(t){return e(E(t))}}})),Object(y.firestoreConnect)([{collection:"chatmessage",orderBy:["timeS","desc"],limit:20}]))(S);var N=Object(i.b)((function(e){return{auth:e.firebase.auth}}))((function(e){var t=e.auth.uid?r.a.createElement(w,null):r.a.createElement(p,null);return r.a.createElement("div",{className:"App",style:{height:"100vh"}},r.a.createElement(o,null),t)}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var j={chat:[{id:"1",message:"hey this is a simple message"},{id:"2",message:"Hi a simple reply"}]},C={},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return console.log("Success"),Object(v.a)(Object(v.a)({},e),{},{authError:null});case"LOGIN_ERROR":return console.log("Error"),Object(v.a)(Object(v.a)({},e),{},{authError:"Login Failed"});case"SIGNOUT_SUCCESS":return console.log("Logged out"),e;case"SIGNOUT_ERROR":return console.log("error in logout"),e;default:return e}},R=a(48),F=Object(O.c)({auth:I,chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Send_Message":return console.log("message",t.message),e;default:return e}},firebase:y.firebaseReducer,firestore:R.firestoreReducer}),M=a(78),k=a.n(M),x=(a(393),a(396),a(202));k.a.initializeApp({apiKey:"AIzaSyDvPg7OUxYV9OgF48g2ve8z4UsYVXz5Zqs",authDomain:"chatapp-9362e.firebaseapp.com",databaseURL:"https://chatapp-9362e.firebaseio.com",projectId:"chatapp-9362e",storageBucket:"chatapp-9362e.appspot.com",messagingSenderId:"752600529467",appId:"1:752600529467:web:305646a97b2394ce7b7a1e",measurementId:"G-30D8MFLWVL"}),k.a.firestore().settings({});var U=Object(O.e)(F,Object(O.d)(Object(O.a)(x.a.withExtraArgument({getFirebase:y.getFirebase,getFirestore:R.getFirestore})))),A={firebase:k.a,config:{},dispatch:U.dispatch,createFirestoreInstance:R.createFirestoreInstance};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:U},r.a.createElement(y.ReactReduxFirebaseProvider,A,r.a.createElement(N,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[204,1,2]]]);
//# sourceMappingURL=main.4293b0c4.chunk.js.map